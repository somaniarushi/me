<!DOCTYPE html>
<html lang="en-us">

<head>
  

  <title>Using Obscure CSS Notation For Dark Mode | AMKS</title>

  <meta property="og:title" content="Using Obscure CSS Notation For Dark Mode | AMKS" />
  <meta name="twitter:title" content="Using Obscure CSS Notation For Dark Mode | AMKS" />
  <meta itemprop="name" content="Using Obscure CSS Notation For Dark Mode | AMKS" />
  <meta name="application-name" content="Using Obscure CSS Notation For Dark Mode | AMKS" />
  <meta property="og:site_name" content="amks" />


  <meta charset="UTF-8">
  <meta name="language" content="en">
  <meta name="description" content="On the path of finding the correct way of doing this, I stumbled upon a very wrong way.">
  <meta itemprop="description" content="On the path of finding the correct way of doing this, I stumbled upon a very wrong way." />
  <meta property="og:description" content="Making the things that help other people make things. Sophomore at UC Berkeley passionate about CS, Economics, Astrophysics and Entrepreneurship." />
  <meta name="twitter:description" content="Making the things that help other people make things. Sophomore at UC Berkeley passionate about CS, Economics, Astrophysics and Entrepreneurship." />

  <base href="">
  <link rel="canonical" href="" itemprop="url" /> 
  <meta name="url" content="" />
  <meta name="twitter:url" content="" /> 
  <meta property="og:url" content="" />
  
  <meta name="keywords" content="web-development , vanilla , css , toggle , tutorial , teaching , walkthrough">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="google-site-verification" content="8cyiY374WL2LGr87fBghcdJCRx6BaPNBvLjeZlk6tyc" />

  
  
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Using Obscure CSS Notation For Dark Mode" />
  <meta name="twitter:description" content="On the path of finding the correct way of doing this, I stumbled upon a very wrong way."
  />
  <meta name="twitter:site" content="@amksomani" />
  <meta name="twitter:creator" content="@amksomani" />
  

  <link rel="shortcut icon" type="image/png" href="/favicon.ico" />
  
<link rel="stylesheet" href="/css/post.css" /> 

   
   
    

<script type="application/ld+json">
  
    {
      "@context" : "http://schema.org",
      "@type" : "BlogPosting",
      "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/www.amks.me"
      },
      "articleSection" : "blog",
      "name" : "Using Obscure CSS Notation For Dark Mode",
      "headline" : "Using Obscure CSS Notation For Dark Mode",
      "description" : "On the path of finding the correct way of doing this, I stumbled upon a very wrong way.",
      "inLanguage" : "en-US",
      "author" : "",
      "creator" : "",
      "publisher": "",
      "accountablePerson" : "",
      "copyrightHolder" : "",
      "copyrightYear" : "2020",
      "datePublished": "2020-06-16 20:50:10 -0700 PDT",
      "dateModified" : "2020-06-16 20:50:10 -0700 PDT",
      "url" : "https:\/\/www.amks.me\/blog\/css-does-strange-things\/",
      "wordCount" : "632",
      "keywords" : ["web-development", "vanilla", "css", "toggle", "tutorial", "teaching", "walkthrough", "Blog"]
    }
  
  </script>

</head>

<body>
  <div class="burger__container">
  <div class="burger" aria-controls="navigation" aria-label="Menu">
    <div class="burger__meat burger__meat--1"></div>
    <div class="burger__meat burger__meat--2"></div>
    <div class="burger__meat burger__meat--3"></div>
  </div>
</div>
 

  <nav class="nav" role="navigation">
  <ul class="nav__list">
     
    
      <li>
        <a  href="/">home</a>
      </li>
    
      <li>
        <a  href="/about">about me</a>
      </li>
    
      <li>
        <a  href="https://github.com/somaniarushi">github</a>
      </li>
    
      <li>
        <a  href="https://www.linkedin.com/in/arushisomani">linkedin</a>
      </li>
    
      <li>
        <a  href="/resume.pdf">resume</a>
      </li>
    
      <li>
        <a  href="/teaching">teaching</a>
      </li>
    
      <li>
        <a  class="active"
           href="/blog">blog</a>
      </li>
    
  </ul>
</nav>


  <main>
    
<div class="post">
  <header class="post__header">
    <h1 class="post__title">Using Obscure CSS Notation For Dark Mode</h1>
   
  </header>
  <article class="post__content">

    <div class="post__details__wrapper">
    <div class="post__details">
      <time datetime="2020-06-16 20:50:10 -0700 PDT" class="post__date">
        Jun 16 2020
      </time>
      <span class="divider">|</span>
      <div class="post__location">
        Berkeley, USA
      </div>
      <span class="divider">|</span>
      <div class="post__length">
        6 minutes
      </div>
    </div>
  </div>
    
<p>If you&rsquo;re using any node-based framework, you can use <a href="https://npmjs.org/@asomani/darkmode">the package I created</a> instead. <a href="/blog/dark-like-my-soul">I also wrote about it.</a></p>
<h2 id="no-toggle-solution">No Toggle Solution<a class="anchor" href="#no-toggle-solution">#</a></h2>
<p>CSS provides a media query to let your website <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme">match the preference of the user</a>.</p>
<pre><code>/* Other Styles Here */
...

@media (prefers-color-scheme: dark) {
    h1 {
        color: white;
    }
    /* Other Selector Style Updates */
    ...
}
</code></pre><h2 id="toggle-solution">Toggle Solution<a class="anchor" href="#toggle-solution">#</a></h2>
<p><strong>Fundamental Idea</strong>: use the <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Adjacent_sibling_combinator">CSS + selector</a> to match sibling items with a checkbox label.</p>
<h3 id="making-the-toggle">Making The Toggle<a class="anchor" href="#making-the-toggle">#</a></h3>
<p>First, let&rsquo;s set up the HTML file, a <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox">checkbox</a> as our toggle. A wrapper division contains our label and subparts of the label. Every other piece of content will be a part of the wrapper.</p>
<pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;
            Introduction
        &lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;dark-mode.css&quot;&gt; 
    &lt;/head&gt; 
    &lt;body&gt;
        &lt;input type=&quot;checkbox&quot; id=&quot;cb&quot; /&gt;
        &lt;div id=&quot;wrapper&quot;&gt;
            &lt;label id=&quot;toggler&quot; for=&quot;cb&quot;&gt;
                 &lt;span class=&quot;toggle-border&quot;&gt;
                    &lt;span class=&quot;toggle-indicator&quot;&gt;&lt;/span&gt;
                &lt;/span&gt;
            &lt;/label&gt;
        &lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>Quite boring till now. No worries! CSS is where the magic happens.</p>
<p>Let&rsquo;s set up a css file now, and link it in the header of the HTML file that we&rsquo;d left blank earlier. <mark>(Don&rsquo;t forget!)</mark> Then, let&rsquo;s begin the css file by removing the standard checkbox, and adding style to the label.</p>
<pre><code>  #cb {
    display: none;
}

  #toggler .toggle-border {
    border: 1px solid #1e1f26;
    width: 50px;
    height: 20px;
    display: block;
    border-radius: 20px;
    position: relative;
  }

  #toggler .toggle-indicator {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    position: absolute;
    background-color: #1e1f26;
    top: 2px;
    left: 2px;
    transition: all 0.3s ease-in-out;
  }
</code></pre><p>Very nice! We&rsquo;re setting up a curved border <code>.toggle-border</code> with a <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/display">block display</a> to prevent collapse. Then we set up a <code>.toggle-indicator</code> circle and position it properly. The <code>position: relative</code> is important to position  <code>.toggle-indicator</code> through <a href="https://www.w3schools.com/cssref/pr_class_position.asp"><code>position: absolute</code></a></p>
<p>Now let&rsquo;s add toggle functionality.</p>
<pre><code>  #cb:checked + #wrapper .toggle-indicator {
    left: 32px;
  }
</code></pre><p>If the checkbox is checked, we&rsquo;re moving the <code>.toggle-indicator</code> 32px to the right (or adding 32px to the left). That&rsquo;s what the <a href="https://css-tricks.com/almanac/properties/t/transition/"><code>transition</code></a> in the <code>.toggle-indicator</code> main selector is for –– delaying the movement and making it smooth.</p>
<p>The <code>#wrapper</code> in there is the piece de resistance –– it&rsquo;s because of this that the <code>+</code> combinator works.</p>
<h3 id="changing-colors">Changing Colors<a class="anchor" href="#changing-colors">#</a></h3>
<pre><code> #cb:checked + #wrapper .toggle-border {
    border-color: white;
  }

 #cb:checked + #wrapper .toggle-indicator {
    background-color: white;
    left: 32px;
  }

 #cb:checked + #wrapper {
    background-color: #121212f5;
    color: #f0f0f0e5;
    padding: 10px;
  }
</code></pre><p>We can do the same thing with all kinds of selectors, as long as they&rsquo;re in the wrapper.</p>
<pre><code>  #cb:checked + #wrapper h1,
  #cb:checked + #wrapper h2,
  #cb:checked + #wrapper h3,
  #cb:checked + #wrapper p,
  #cb:checked + #wrapper li {
    color: #f0f0f0e5;
  }
  
  #cb:checked + #wrapper a {
    color: rgba(143, 194, 253, 0.829);
  }
  
  #cb:checked + #wrapper a:hover {
    color: rgba(59, 140, 233, 0.829);
    transition: all 0.2s ease-in;
  }
  
  #cb:checked + #wrapper code {
    background-color: rgba(143, 194, 253, 0.233);
  } 
</code></pre><h3 id="storing-last-preference">Storing Last Preference<a class="anchor" href="#storing-last-preference">#</a></h3>
<p>Across different pages and multiple visits, we want to be able to save that info and not force the user to toggle every single time. We can use JQuery and Javascript to do that.</p>
<p>First, let&rsquo;s import <a href="https://jquery.com/">jQuery</a> in our HTML file. Then, create a JS file and insert it into the HTML file.</p>
<pre><code>&lt;html&gt;
    &lt;head&gt; 
        ... 
        &lt;script src=&quot;//code.jquery.com/jquery-1.11.0.min.js&quot;&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;script src=&quot;dark-mode.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p>In the dark mode javascript file, we run a function when the document gets ready.</p>
<pre><code>  $(document).ready(onReady);
</code></pre><p>In this function, we want to store a variable in <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage"><code>localStorage</code></a>.</p>
<pre><code> function onReady() {
    let checked=&quot;true&quot;==localStorage.getItem(&quot;checked&quot;);
    $(&quot;#cb&quot;).prop('checked', checked);
  }

$(document).ready(onReady);
</code></pre><p>Here, we change the value of the checkbox to whatever it was the last time.</p>
<pre><code>function onClickBox() {
    let checked=$(&quot;#cb&quot;).is(&quot;:checked&quot;);
    localStorage.setItem(&quot;checked&quot;, checked);
  }
  function onReady() {
    let checked=&quot;true&quot;==localStorage.getItem(&quot;checked&quot;);
    $(&quot;#cb&quot;).prop('checked', checked);
    $(&quot;#cb&quot;).click(onClickBox);
  }
$(document).ready(onReady);
</code></pre><p>Now we set up that whenever the checkbox is clicked, the value of the check (true or false) is updated.</p>
<p>And that&rsquo;s it! Congratulations, your toggle is set up, completely vanilla.</p>
<p><a href="https://codepen.io/insomania/pen/zYrojXG">Try it out in codepen.</a></p>


    

    
  </article>
  

<ul class="tags__list">
    
    <li class="tag__item">
        <a class="tag__link" href="https://www.amks.me/tags/web-development/">web-development</a>
    </li></ul>

 <div class="pagination">
  
    <a class="pagination__item" href="https://www.amks.me/blog/dark-like-my-soul/">
        <span class="pagination__label">Previous Post</span>
        <span class="pagination__title">Building A Popular Dark Mode NPM Package</span>
    </a>
  

  
    <a class="pagination__item" href="https://www.amks.me/blog/summer-2020-retrospective/">
      <span class="pagination__label">Next Post</span>
      <span class="pagination__title" >Summer 2020 Retrospective</a>
    </a>
  
</div>

</div>

  </main>

  
<footer>
  <div class="social-icons">
  
  <a class="social-icons__icon social-icons__icon--twitter" href="https://twitter.com/amksomani"></a>
  
  
  <a class="social-icons__icon social-icons__icon--github" href="https://github.com/somaniarushi"></a>
  
</div>

  <p>amk © 2020</p>
</footer>


  <script src="/js/index.js"></script>
  
<script src="/vendor/prism/prism.js"></script>

</body>

</html>
